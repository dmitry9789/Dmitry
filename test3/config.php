<?php
// Конфигурация для интеграции с API Перплексити и настройки генерации поздравлений

// API ключ Перплексити
$API_KEY = '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'; // Укажите свой API-ключ Perplexity

// Шаблон поздравления с переменной {description} для пользовательского описания
// и {lang} для выбранного языка
$GREETING_TEMPLATE = <<<EOT
Пожалуйста, сгенерируй красивое, душевное поздравление-открытку для интернет-магазина цветов. 
Описание: {description}
Язык: {lang}
Требования к поздравлению:
- Текст должен быть грамотно написан, без орфографических, пунктуационных и стилистических ошибок.
- Должны быть расставлены все знаки препинания.
- Поздравление должно подходить для отправки вместе с букетом цветов и отражать заботу и внимание к получателю.
- Пожалуйста, не добавляй иконок или картинок.
Пожалуйста, убедись, что каждое поздравление заканчивается полным предложением, не обрывай текст на середине слова или мысли.
EOT;

// Соответствие кодов языков и их названий
$LANGUAGES = [
    'ru' => 'Русский',
    'en' => 'English',
    'ar' => 'العربية'
];

// Максимальное количество символов в одном поздравлении
$MAX_CHARS_PER_GREETING = 250;

// Максимальное количество символов в общем ответе (если нужно, можно использовать)
$MAX_CHARS = 2500;

// Максимальное количество попыток перегенерации (0 - без ограничений)
$MAX_REGENERATE_ATTEMPTS = 0;

// Информация о приложении
$APP_VERSION = '1.0.0';

// Логирование ошибок
$DEBUG_MODE = false; // установите true для отладки
if ($DEBUG_MODE) {
    ini_set('display_errors', 1);
    ini_set('display_startup_errors', 1);
    error_reporting(E_ALL);
}

// Функция для безопасного логирования ошибок
function logError($message, $context = []) {
    global $DEBUG_MODE;
    if ($DEBUG_MODE) {
        error_log('[Greeting Generator] ' . $message . ': ' . json_encode($context));
    }
}
